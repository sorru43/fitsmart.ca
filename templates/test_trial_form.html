<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trial Request Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; }
        input, select, textarea { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 4px; }
        button { padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; }
        .error { color: red; }
        .success { color: green; }
    </style>
</head>
<body>
    <h1>Trial Request Form Test</h1>
    
    <form method="POST" action="/trial-request/1" id="trialForm">
        <div class="form-group">
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" required>
        </div>
        
        <div class="form-group">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>
        </div>
        
        <div class="form-group">
            <label for="phone">Phone:</label>
            <input type="tel" id="phone" name="phone" required>
        </div>
        
        <div class="form-group">
            <label for="address">Address:</label>
            <textarea id="address" name="address" required></textarea>
        </div>
        
        <div class="form-group">
            <label for="province">State:</label>
            <select id="province" name="province" required>
                <option value="">Select State</option>
                <option value="Maharashtra">Maharashtra</option>
                <option value="Delhi">Delhi</option>
                <option value="Karnataka">Karnataka</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="city">City:</label>
            <select id="city" name="city" required>
                <option value="">Select City</option>
                <option value="Mumbai">Mumbai</option>
                <option value="Delhi">Delhi</option>
                <option value="Bangalore">Bangalore</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="area">Area:</label>
            <select id="area" name="area" required>
                <option value="">Select Area</option>
                <option value="Andheri">Andheri</option>
                <option value="Bandra">Bandra</option>
                <option value="Juhu">Juhu</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="postal_code">Postal Code / ZIP:</label>
            <input type="text" id="postal_code" name="postal_code" required>
        </div>
        
        <div class="form-group">
            <label for="preferred_date">Preferred Date:</label>
            <input type="date" id="preferred_date" name="preferred_date" required>
        </div>
        
        <div class="form-group">
            <label for="notes">Notes:</label>
            <textarea id="notes" name="notes"></textarea>
        </div>
        
        <div class="form-group">
            <label for="meal_plan_id">Meal Plan ID:</label>
            <input type="hidden" id="meal_plan_id" name="meal_plan_id" value="1">
        </div>
        
        <button type="submit">Submit Trial Request</button>
    </form>
    
    <div id="result"></div>
    
    <script>
        // Set minimum date to tomorrow
        const tomorrow = new Date();
        tomorrow.setDate(tomorrow.getDate() + 1);
        document.getElementById('preferred_date').min = tomorrow.toISOString().split('T')[0];
        
        // Form submission handler
        document.getElementById('trialForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const data = {};
            for (let [key, value] of formData.entries()) {
                data[key] = value;
            }
            
            console.log('Form data:', data);
            
            fetch('/trial-request/1', {
                method: 'POST',
                body: formData,
                headers: {
                    'X-Requested-With': 'XMLHttpRequest'
                }
            })
            .then(response => {
                console.log('Response status:', response.status);
                return response.text();
            })
            .then(text => {
                console.log('Response text:', text);
                document.getElementById('result').innerHTML = '<div class="success">Form submitted! Check console for details.</div>';
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('result').innerHTML = '<div class="error">Error: ' + error.message + '</div>';
            });
        });
    </script>
</body>
</html> 