{% extends "admin/base_admin.html" %}

{% block title %}Edit Blog Post - HealthyRizz Admin{% endblock %}

{% block page_title %}Edit Blog Post{% endblock %}

{% block extra_css %}
<link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
<style>
    .editor-container {
        display: none;
    }
    .editor-container.active {
        display: block;
    }
    .toggle-switch {
        position: relative;
        display: inline-block;
        width: 60px;
        height: 34px;
    }
    .toggle-switch input {
        opacity: 0;
        width: 0;
        height: 0;
    }
    .toggle-slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        transition: .4s;
        border-radius: 34px;
    }
    .toggle-slider:before {
        position: absolute;
        content: "";
        height: 26px;
        width: 26px;
        left: 4px;
        bottom: 4px;
        background-color: white;
        transition: .4s;
        border-radius: 50%;
    }
    input:checked + .toggle-slider {
        background-color: #2196F3;
    }
    input:checked + .toggle-slider:before {
        transform: translateX(26px);
    }
    #editor {
        height: 400px;
        margin-bottom: 1rem;
    }
</style>
{% endblock %}

{% block admin_content %}
<div class="container mx-auto px-4 py-8">
    <div class="flex justify-between items-center mb-6">
        <h1 class="text-2xl font-bold">Edit Blog Post</h1>
        <div class="flex space-x-4">
            <a href="{{ url_for('admin_blog') }}" class="btn-secondary">
                <i class="fas fa-arrow-left mr-2"></i>Back to Blog
            </a>
        </div>
    </div>

    <div class="bg-white rounded-lg shadow">
        <form method="POST" enctype="multipart/form-data" class="p-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Title -->
                <div class="col-span-2">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Title</label>
                    <input type="text" name="title" value="{{ post.title }}" required
                           class="form-input w-full" placeholder="Enter post title">
                </div>

                <!-- Category -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Category</label>
                    <select name="category" class="form-select w-full">
                        <option value="">Select Category</option>
                        {% for category in categories %}
                        <option value="{{ category }}" {% if post.category == category %}selected{% endif %}>{{ category }}</option>
                        {% endfor %}
                    </select>
                </div>

                <!-- Tags -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">Tags</label>
                    <input type="text" name="tags" value="{{ post.tags }}"
                           class="form-input w-full" placeholder="Enter tags (comma-separated)">
                </div>

                <!-- Featured Image -->
                <div class="col-span-2">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Featured Image</label>
                    {% if post.featured_image %}
                    <div class="mb-2">
                        <img src="{{ post.featured_image }}" alt="Current featured image" class="h-32 w-32 object-cover rounded">
                    </div>
                    {% endif %}
                    <input type="file" name="image" accept="image/*" class="form-input w-full">
                </div>

                <!-- Content -->
                <div class="col-span-2">
                    <label class="block text-sm font-medium text-gray-700 mb-1">Content</label>
                    <textarea name="content" required rows="10"
                              class="form-textarea w-full" placeholder="Write your blog post content">{{ post.content }}</textarea>
                </div>

                <!-- Publish Status -->
                <div class="col-span-2">
                    <label class="flex items-center space-x-2">
                        <input type="checkbox" name="is_published" value="true"
                               {% if post.is_published %}checked{% endif %}
                               class="form-checkbox h-4 w-4 text-primary">
                        <span class="text-sm font-medium text-gray-700">Publish immediately</span>
                    </label>
                </div>
            </div>

            <div class="mt-6 flex justify-end space-x-4">
                <a href="{{ url_for('admin_blog') }}" class="btn-secondary">Cancel</a>
                <button type="submit" class="btn-primary">Save Changes</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
// Add any JavaScript for rich text editor or image preview here
</script>
{% endblock %}
